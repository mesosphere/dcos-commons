name: "proxylite"
principal: "proxylite-principal"
zookeeper: master.mesos:2181
api-port: {{PORT0}}
pods:
  web:
    container:
      image-name: ubuntu:14.04
    count: 1
    tasks:
      server:
        goal: RUNNING
        cmd: "echo $PORT_HTTPD && python3 -m http.server $PORT_HTTPD"
        cpus: {{PROXY_LITE_CPUS}}
        memory: {{PROXY_LITE_MEM}}
        ports:
         - name: HTTPD
           port: 4041
  proxylite:
    container:
      image-name: nlsun/proxylite # Put this in the real Mesosphere account
    count: 1
    tasks:
      server:
        goal: RUNNING
        cmd: "chmod 755 /proxylite/run.sh && /proxylite/run.sh"
        cpus: {{PROXY_LITE_CPUS}}
        memory: {{PROXY_LITE_MEM}}
        ports:
         - name: PROXY
           port: 4040
        env:
          BACKENDS: {{BACKENDS}}
        configurations:
         - template: "{{CONFIG_TEMPLATE_PATH}}/haproxy.cfg"
           dest: /proxylite/haproxy.cfg
