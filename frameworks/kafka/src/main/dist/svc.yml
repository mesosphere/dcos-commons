name: {{FRAMEWORK_NAME}}
principal: {{FRAMEWORK_PRINCIPLE}}
zookeeper: master.mesos:2181
api-port: {{PORT1}}
pods:
  kafka:
    count: {{BROKER_COUNT}}
    tasks:
      broker:
        cpus: {{BROKER_CPUS}}
        memory: {{BROKER_MEM}}
        ports:
          broker-port:
            port: 9092
        volume:
          path: broker-data
          type: ROOT
          size: {{BROKER_DISK}}
        goal: RUNNING
        cmd: "env && exec $MESOS_SANDBOX/{{KAFKA_VER_NAME}}/bin/kafka-server-start.sh $MESOS_SANDBOX/{{KAFKA_VER_NAME}}/config/server.properties"
        uris:
          - "https://downloads.mesosphere.com/kafka/assets/kafka_2.11-0.10.0.0.tgz"
          - {{KAFKA_URI}}
        configurations:
          - template: "{{CONFIG_TEMPLATE_PATH}}/server.properties.mustache"
            dest: "{{KAFKA_VER_NAME}}/config/server.properties"
